<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <title>管理员添加</title>
    <link href="css/admin.css" rel="stylesheet">
	<link href="css/art.css" rel="stylesheet">
	<link href="css/default.css" rel="stylesheet">
	<link href="css/style.css" rel="stylesheet">
	<script type="text/javascript" src="js/jquery.js"></script>
  </head>
  
  <body>
  #getMothodSc("moduleName=admin.action.Common" "parameters=tag:1,vmpath:admin/head.vm,level:1,level2:48")
  
<div class="container">
	
		
	
<div id="admin_right">
     <div class="headbar">
	<div class="position"><span>系统</span><span>></span><span>权限管理</span><span>></span><span>管理员添加</span></div>
</div>
<div class="content_box">
      <div class="content form_content">
	<form action="saveAdmin.htm"  method="post" name="admin_edit">
		<input type="hidden" value="$!admin.id" name="admin_id"/>
	   <table class="form_table">
		<col width="150px" />
		<col />
		<tr>
        		<th>用户名：</th>
        		<td>
        		   <input type='text' name='admin_name' value="$!admin.admin_name" class='normal' pattern='^\w{4,20}$' alt='请填写英文字母，数字或下划线，在4-20个字符之间' onblur="checkName();" />
        		   <label id='unique'>* 管理员登录后台的用户名，请填写英文字母，数字或下划线，在4-20个字符之间</label>
        		</td>
		</tr>
		<tr name="pwd">
		        <th>密码：</th>
			<td>
			    <input type='password' class='normal' name='password' pattern='^\w{6,32}$' alt='请填写英文字母，数字或下划线，在6-32个字符之间' />
			    <label>* 管理员登录后台的密码，请填写英文字母，数字或下划线，在6-32个字符之间</label>
			</td>
		</tr>

		<tr name="pwd">
			<th>重复密码：</th>
			<td>
			     <input type='password' class='normal' name='repassword' pattern='^\w{6,32}$' alt='重复输入管理员登录后台的密码' bind='password' />
			     <label>* 重复输入管理员登录后台的密码</label>
			</td>
		</tr>

		<tr>
			<th>角色：</th>
			<td>
				<select class='normal' name='role_id' pattern='required' alt='请选择一个角色' >
				<option value=''>请选择</option>
				 #foreach($role in $roleList)
				 <option value='$role.id' #if($!admin.role_id == $role.id)selected="selected"#end>$role.name</option>  
                 #end
				<label>*为管理员分配一个角色</label>
			</td>
		</tr>
		<tr>
			<th>Email:</th>
			<td>
			      <input type='text' name='email' value="$!admin.email"class='normal' empty alt='请填写正确的email格式' />
			      <label>联系此管理员的email邮箱地址</label>
			</td>
		</tr>
		<tr>
			<td>
			</td>
			<td>
			<button class="submit" type="submit"><span>保 存</span></button></td>
		</tr>
	</table>
	</form>
	</div>
</div>

<script type='text/javascript'>

	//ajax检查admin_name唯一性
	function checkName()
	{
		var nameVal = $('[name="admin_name"]').val(); //获取登录名
		var idVal   = $('[name="id"]').val();         //获取id

		jQuery.post(
			'/url,
			function(content)
			{
				var content = $.trim(content);
				if(content == -1)
				{
					$('[name="admin_name"]').removeClass('valid-text');
					$('#unique').removeClass('valid-msg');

					$('[name="admin_name"]').addClass('invalid-text');
					$('#unique').addClass('invalid-msg');

					$('#unique').html(nameVal+'用户名已经存在，请重新更换一个');
				}
			}
		);
	}

	//展示密码重设
	function reset_pwd()
	{
		$('[name="reset_pwd"]').hide();

		$('[name="pwd"]').each(
			function (i)
			{
				$('[name="pwd"]:eq('+i+') *').show();
			}
		);
	}

	//修改信息时自动隐藏
	
	
</script>

	</div>

</div>
  #getMothodSc("moduleName=admin.action.Common" "parameters=tag:2,vmpath:admin/foot.vm");
  </body>
</html>
